<!DOCTYPE html>
<html>
  <head>
    <title>F1 Mercedes AR</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.min.js"></script>
    <script src="https://unpkg.com/aframe-gesture-detector@3.3.0/dist/aframe-gesture-detector.min.js"></script>
    <script src="https://unpkg.com/aframe-super-hands-component@4.0.5/dist/aframe-super-hands-component.min.js"></script>

    <style>
      #status {
        position: fixed;
        top: 20px;
        left: 20px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 10px;
        border-radius: 5px;
        z-index: 1000;
        font-family: Arial, sans-serif;
      }
      #debug {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 10px;
        border-radius: 5px;
        z-index: 1000;
        font-family: monospace;
        font-size: 12px;
        max-width: 300px;
      }
    </style>

    <script>
      AFRAME.registerComponent('log-load', {
        init: function () {
          this.el.addEventListener('model-loaded', () => {
            console.log('‚úÖ Model loaded!');
            document.getElementById('debug').innerHTML = 'Model: ‚úÖ Loaded';
          });
          this.el.addEventListener('model-error', (e) => {
            console.error('‚ùå Model load error:', e.detail.src);
            document.getElementById('debug').innerHTML =
              'Model: ‚ùå Error - ' + e.detail.src;
          });
        },
      });

      AFRAME.registerComponent('marker-handler', {
        init: function () {
          this.el.addEventListener('markerFound', () => {
            document.getElementById('status').innerText = 'Marker terdeteksi!';
            console.log('üéØ Marker detected!');
          });
          this.el.addEventListener('markerLost', () => {
            document.getElementById('status').innerText = 'Mencari marker...';
            console.log('‚ùå Marker lost');
          });
        },
      });
    </script>
  </head>

  <body style="margin: 0; overflow: hidden;">
    <div id="status">Mencari marker...</div>
    <div id="debug">Loading...</div>

    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
      <a-assets>
        <a-asset-item id="modelGLB" src="destroyer.glb"></a-asset-item>
      </a-assets>

      <a-marker
        type="pattern"
        url="https://raw.githubusercontent.com/zakycahyohadi/AR/master/pattern-marker.patt"
        marker-handler
      >
        <a-entity
          gltf-model="#modelGLB"
          position="0 0 0"
          scale="0.5 0.5 0.5"
          rotation="0 0 0"
          gesture-handler
          log-load
        ></a-entity>

        <a-light type="ambient" color="#fff" intensity="0.7"></a-light>
        <a-light
          type="directional"
          color="#fff"
          intensity="0.7"
          position="0 1 1"
        ></a-light>
      </a-marker>

      <a-entity camera gesture-detector look-controls></a-entity>
    </a-scene>
  </body>
</html>
